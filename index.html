<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>騾｣骼悶Γ繧､繧ｭ繝ｳ繧ｰ繧ｹ繝斐Φ繧ｪ繝</title>
  <meta name="theme-color" content="#000000" />
  <meta name="description" content="このページは開かないでください。" />
  <style>
    html,body{margin:0;padding:0;background:#000;color:#eee;font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif}
    .wrap{min-height:100svh;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:16px}
    h1{font-weight:700;letter-spacing:.08em;margin:24px 0 0;text-align:center}
    .hint{opacity:.6;font-size:.9rem}
    video{max-width:96vw;max-height:70vh;outline:1px solid #111;box-shadow:0 0 30px rgba(255,0,0,.08)}
    .bar{width:100%;height:1px;background:linear-gradient(90deg,transparent,#700 40%,transparent)}
    footer{opacity:.45;font-size:.8rem;padding:24px 0 32px}
    a{color:#e66}
    @media (prefers-reduced-motion: reduce){*{scroll-behavior:auto}}
    /* 透かし（任意） */
    #wm{position:fixed;right:12px;bottom:10px;color:#fff;opacity:.4;font-size:.8rem;z-index:5;pointer-events:none}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="bar"></div>
    <h1><!-- PAGE_TITLE --></h1>

    <!-- ダウンロード抑止オプション付き video -->
    <video id="v"
      playsinline autoplay muted controls preload="metadata" poster=""
      controlsList="nodownload noplaybackrate"
      disablePictureInPicture
      oncontextmenu="return false"
      aria-label="do not open">
      <source src="./Chain_making_spinoff.mp4?v=6" type="video/mp4" />
      お使いのブラウザは video タグに対応していません。
    </video>

    <div class="hint">閾ｪ蟾ｱ雋ｬ莉ｻ縺ｧ縺秘夢隕ｧ縺上□縺輔</div>
    <footer>© <span id="y"></span> last-signal</footer>
  </div>

  <!-- 透かし（任意） -->
  <div id="wm">© last-signal · small-gloomy-box.ignorelist.com</div>

  <!-- 保存/長押しメニュー抑止用のオーバーレイ（動画範囲だけ反応） -->
  <div id="overlay" style="position:fixed;inset:0;z-index:4;background:transparent"></div>

  <script>
    const v = document.getElementById('v');
    const overlay = document.getElementById('overlay');

    // 年号
    document.getElementById('y').textContent = new Date().getFullYear();

    // 初回はミュート自動再生（失敗しても無視）
    (async () => { try { await v.play(); } catch(e) {} })();

    // 以前に許可済みならミュート解除を試みる（環境により無視されることあり）
    if (localStorage.getItem('allowSound') === '1') v.muted = false;

    // 画面の最初のユーザー操作で音ON（ボタンなし）
    const enableSound = async () => {
      try {
        v.muted = false;
        await v.play();
        localStorage.setItem('allowSound','1');
      } catch(e) {}
      // 保存系抑止のオーバーレイは以後邪魔しないよう無効化
      overlay.style.display = 'none';
      window.removeEventListener('pointerup', enableSound, true);
      window.removeEventListener('keydown', keyEnable, true);
    };
    const keyEnable = (e) => {
      if (e.key === 'Enter' || e.key === ' ') enableSound();
    };
    window.addEventListener('pointerup', enableSound, true); // どこタップでもOK
    window.addEventListener('keydown', keyEnable, true);

    // 保存/長押し系の軽い抑止（完全防止ではありません）
    const block = (e) => e.preventDefault();
    ['contextmenu','dragstart','selectstart','touchstart','touchend'].forEach(ev =>
      overlay.addEventListener(ev, block, {passive:false})
    );

    // オーバーレイは動画領域だけに効くようクリップ
    const clipToVideo = () => {
      const r = v.getBoundingClientRect();
      overlay.style.clipPath =
        `polygon(${r.left}px ${r.top}px, ${r.right}px ${r.top}px, ${r.right}px ${r.bottom}px, ${r.left}px ${r.bottom}px)`;
    };
    clipToVideo();
    window.addEventListener('resize', clipToVideo);
  </script>
</body>
</html>

